<!-- JavaScript minimo DEFERITO per performance -->
<script>
  // Script critici caricati DOPO il DOM ready
  function initCriticalScripts() {
    // Navbar toggle senza jQuery - Performance ottimizzata
    const navbarToggler = document.querySelector('.navbar-toggler');
    const navbarCollapse = document.querySelector('.navbar-collapse');
    
    if (navbarToggler && navbarCollapse) {
      navbarToggler.addEventListener('click', function() {
        navbarCollapse.classList.toggle('show');
      });
      
      // Chiudi menu quando si clicca su un link
      const navLinks = document.querySelectorAll('.nav-link');
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          navbarCollapse.classList.remove('show');
        });
      });
    }
  }
  
  // Carica script solo quando il DOM Ã¨ pronto - Non blocca il rendering
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCriticalScripts);
  } else {
    initCriticalScripts();
  }
</script>

<!-- Form validation solo per pagina contact -->
{% if page.url contains 'contact' %}
<script>
  function initContactForm() {
    const form = document.querySelector('form');
    if (form) {
      form.addEventListener('submit', function(e) {
        const name = form.querySelector('[name="name"]');
        const email = form.querySelector('[name="email"]');
        if (!name.value || !email.value) {
          e.preventDefault();
          alert('Compila tutti i campi obbligatori');
        }
      });
    }
  }
  
  // Carica form validation post-load per non bloccare rendering
  window.addEventListener('load', initContactForm);
</script>
{% endif %}
