#!/usr/bin/env python3
"""
Script di applicazione allineamento immagini cluster.
Generato automaticamente il 2025-11-05 09:49:53

UTILIZZO:
    python3 scripts/apply_cluster_alignment.py
"""

import os
import re
import shutil
from pathlib import Path
from datetime import datetime

CHANGES = [{'cluster_file': 'pages/categories/filosofia-pratica.md', 'cluster_title': 'Filosofia pratica', 'category': 'filosofia-pratica', 'current_image': '(vuoto)', 'current_hero': '(vuoto)', 'current_lcp': '/img/categories/filosofia-pratica-cover-1600.webp', 'new_image': 'https://res.cloudinary.com/dkoc4knvv/image/upload/f_auto,q_auto,dpr_auto,c_fill,ar_16:9,w_1600/v1762330002/cervello_pnyicx.webp', 'cornerstone_file': '_posts/filosofia-pratica/2025-02-04-neuroscienze-e-buddismo.md', 'cornerstone_title': 'Cervello vs Buddha: chi smaschera davvero l’inganno dell’Io', 'full_content': '---\nlayout: category\ntitle: "Filosofia pratica"\ncategory: filosofia-pratica\npermalink: /categorie/filosofia-pratica/\nredirect_from:\n  - /filosofia-pratica/\n  - /spiritualita-pratica/\n  - /categorie/spiritualita-pratica\nseo_title: "Filosofia pratica: guida e articoli selezionati"\nseo_description: "Filosofia pratica e modelli mentali per decisioni quotidiane chiare. Stoicismo applicato, bias cognitivi, strumenti per scelte consapevoli."\ndescription: "Idee chiare e azionabili da usare lunedì mattina: principi e cornici mentali per decisioni più semplici."\nintro: "Modelli mentali e regole operative per affrontare scelte quotidiane con meno rumore. Stoicismo applicato, bias cognitivi e strumenti pratici per decisioni consapevoli. Nessun bisogno di lauree in filosofia: solo concetti chiari da mettere in pratica subito, tra riunioni Zoom e supermercato. Perfetto per chi cerca chiarezza senza fronzoli accademici, con una buona dose di pragmatismo."\npromise: "Cornici mentali e principi operativi da applicare subito nelle tue scelte quotidiane, supportati da esempi pratici."\ntopics:\n  - title: "Stoicismo applicato"\n    description: "Principi stoici tradotti in azioni concrete per la vita moderna e il lavoro quotidiano."\n  - title: "Bias cognitivi"\n    description: "Riconosci i tranelli della mente e prendi decisioni più lucide e consapevoli."\n  - title: "Modelli decisionali"\n    description: "Cornici mentali e regole semplici per scegliere meglio, più velocemente e con meno rumore."\n  - title: "Filosofia senza accademichese"\n    description: "Idee chiare da usare lunedì mattina, spiegate senza prerequisiti filosofici complessi."\nog_image: /img/categories/filosofia-pratica-cover.webp\nlcp_image: /img/categories/filosofia-pratica-cover-1600.webp\nimage_alt: "Filosofia pratica per decisioni quotidiane"\ncornerstone_ids:\n  - libero-arbitrio\n  - bias-cognitivi\nfaq:\n  - question: "Che tipo di filosofia pratica trovi qui?"\n    answer: "Cornici mentali e regole semplici da usare nella vita e nel lavoro: stoicismo applicato, bias cognitivi, modelli decisionali."\n  - question: "Come posso applicare questi concetti?"\n    answer: "Ogni articolo include esempi pratici e strumenti operativi da usare subito nelle tue scelte quotidiane."\n  - question: "È necessario conoscere la filosofia classica?"\n    answer: "No. Rendiamo i concetti accessibili e immediatamente applicabili, senza prerequisiti accademici."\nrelated_pillar: /equilibrio-interiore-guida-pratica/\nrelated_pillar_title: "Guida all\'Equilibrio Interiore"\n---\n', 'absolute_path': '/home/teo/Project/messymind.it/pages/categories/filosofia-pratica.md'}, {'cluster_file': 'pages/categories/crescita-personale-antiguru.md', 'cluster_title': 'Crescita personale anti-guru', 'category': 'crescita-personale-anti-guru', 'current_image': '(vuoto)', 'current_hero': '/img/categories/crescita-anti-guru-cover.webp', 'current_lcp': '/img/categories/crescita-anti-guru-cover-1600.webp', 'new_image': 'https://res.cloudinary.com/dkoc4knvv/image/upload/f_auto,q_auto,dpr_auto,c_fill,g_auto,ar_16:9,w_1600/v1755954730/motivane_1600_cd7kp8.webp', 'cornerstone_file': '_posts/crescita-personale-anti-guru/2025-08-23-scopo-motivazione-arte-del-no.md', 'cornerstone_title': 'Smetti di rincorrere la motivazione: trova lo scopo e impara a dire no', 'full_content': '---\nlayout: category\ntitle: "Crescita personale anti-guru"\ncategory: crescita-personale-anti-guru\npermalink: /categorie/crescita-personale-anti-guru/\nredirect_from:\n  - /crescita-personale-anti-guru/\n  - /crescita-personale-anti-guru\n  - /categorie/crescita-autentica/\n  - /crescita-personale/\nseo_title: "Crescita personale anti-guru: disciplina minima, risultati reali"\nseo_description: "Abitudini minime, confini gentili e produttività senza hype. Guide, strumenti e casi reali per migliorare ogni giorno senza guru."\ndescription: "Strategie pratiche e senza fronzoli per migliorare ogni giorno con abitudini minime, confini gentili e scelte consapevoli."\nintro: "Niente guru, solo disciplina quotidiana che funziona nel caos. Qui trovi micro-abitudini da 3-10 minuti, template pratici e strategie testate nel mondo reale per costruire confini gentili e scelte consapevoli. Zero motivazionismo da copertina: solo ciò che è sostenibile nel lungo termine, un piccolo passo alla volta. Perfetto per chi vuole migliorare senza vendere l\'anima a slogan vuoti."\npromise: "Focus su disciplina quotidiana sostenibile, micro-abitudini da 3–10 minuti e strumenti semplici che funzionano nel mondo reale."\ntopics:\n  - title: "Micro-abitudini che durano"\n    description: "Parti da 2-5 minuti, stabilisci l\'abitudine a eventi quotidiani e misura la continuità, non la perfezione."\n  - title: "Disciplina vs Motivazione"\n    description: "La motivazione accende, la disciplina mantiene. Crea contesti che rendono la scelta giusta la scelta facile."\n  - title: "Confini gentili"\n    description: "Impara a dire no con rispetto, proteggere il tuo tempo e difendere le tue priorità senza sensi di colpa."\n  - title: "Strumenti concreti"\n    description: "Template, checklist e tool pratici per costruire routine sostenibili nel lungo termine."\nhero_image: /img/categories/crescita-anti-guru-cover.webp\nlcp_image: /img/categories/crescita-anti-guru-cover-1600.webp\nog_image: /img/categories/crescita-anti-guru-cover.webp\ntwitter_card: summary_large_image\nfaq:\n  - question: "Cosa significa crescita personale anti-guru?"\n    answer: "Un approccio concreto che preferisce la disciplina ripetuta alla motivazione momentanea. Zero dogmi, solo ciò che è sostenibile."\n  - question: "Come costruire abitudini che durano?"\n    answer: "Parti micro (2–5 minuti), ancora l’abitudine a un evento quotidiano e misura solo la continuità (non la perfezione)."\n  - question: "Motivazione o disciplina?"\n    answer: "La motivazione accende, la disciplina mantiene. Crea un contesto che renda la scelta giusta la scelta facile."\n---\n', 'absolute_path': '/home/teo/Project/messymind.it/pages/categories/crescita-personale-antiguru.md'}, {'cluster_file': 'pages/categories/mindfulness-ironica.md', 'cluster_title': 'Mindfulness con ironia', 'category': 'mindfulness-ironica', 'current_image': '(vuoto)', 'current_hero': '/img/categories/mindfulness-cover.webp', 'current_lcp': '/img/categories/mindfulness-cover-1600.webp', 'new_image': 'https://res.cloudinary.com/dkoc4knvv/image/upload/f_auto,q_auto,dpr_auto,c_fill,ar_16:9,w_1600/v1757328498/meditazione_yoga_1920_ojov4j.webp', 'cornerstone_file': '_posts/mindfulness-ironica/pratiche-quotidiane-urbane/2025-09-08-vipassana-urbana.md', 'cornerstone_title': 'Vipassana Urbana: meditazione pratica per trovare calma in città', 'full_content': '---\nlayout: category\ncategory: mindfulness-ironica\ntitle: "Mindfulness con ironia"\nseo_title: "Mindfulness leggera e autentica: tecniche e storie senza guru"\nseo_description: "Mindfulness senza incenso: approccio leggero e autentico. Storie, esercizi e riflessioni per ritrovare equilibrio con un pizzico di ironia."\ndescription: "Mindfulness senza guru né incensi: approccio leggero e autentico per ritrovare equilibrio nel caos quotidiano."\nintro: "Mindfulness per persone normali, senza rituali esotici. Qui trovi esercizi da 2-5 minuti, storie vere e riflessioni pratiche per coltivare presenza e consapevolezza in mezzo al traffico, alle email e alla lista della spesa infinita. Zero sermoni, solo strumenti concreti per ritrovare equilibrio con un pizzico di sana ironia. Perfetto per chi vuole meditare senza diventare un monaco."\npromise: "Pratiche quotidiane urbane da integrare subito, con indicazioni chiare e storie reali per ispirare senza idealizzare."\ntopics:\n  - title: "Pratiche da 2-5 minuti"\n    description: "Esercizi brevi e realistici da fare in ufficio, in metro o mentre aspetti il caffè."\n  - title: "Presenza nel caos"\n    description: "Coltiva attenzione e consapevolezza tra email, riunioni e notifiche senza bisogno di incensi o di tempi nei boschi."\n  - title: "Storie reali"\n    description: "Esperienze autentiche di persone normali, senza idealizzazioni o promesse miracolose."\n  - title: "Mindfulness urbana"\n    description: "Strumenti per ritrovare equilibrio nel traffico quotidiano, non in un monastero silenzioso."\nhero_image: /img/categories/mindfulness-cover.webp\nlcp_image: /img/categories/mindfulness-cover-1600.webp\npermalink: /categorie/mindfulness-ironica/\nredirect_from: \n- /categorie/mindfulness/\n- /mindfulness-ironica\n- /mindfulness-ironica/\n- /pages/categories/mindfulness-ironica/\nfaq:\n  - question: "Serve esperienza con la meditazione?"\n    answer: "No. Ogni pratica è progettata per chi inizia da zero e ha poco tempo."\n  - question: "Quanto tempo serve al giorno?"\n    answer: "Anche 2-5 minuti possono fare differenza se ripetuti con costanza."\n  - question: "Funziona davvero per lo stress quotidiano?"\n    answer: "Sì. Le pratiche sono testate nel mondo reale, non in un monastero silenzioso."\n---\n\n\n', 'absolute_path': '/home/teo/Project/messymind.it/pages/categories/mindfulness-ironica.md'}, {'cluster_file': 'pages/categories/burnout-e-lavoro.md', 'cluster_title': 'Burnout e lavoro', 'category': 'burnout-e-lavoro', 'current_image': '(vuoto)', 'current_hero': '(vuoto)', 'current_lcp': '(vuoto)', 'new_image': 'https://res.cloudinary.com/dkoc4knvv/image/upload/f_auto,q_auto,dpr_auto,c_fill,g_auto,ar_16:9,w_1600/v1756043562/lavoro_1600_jkqmrs.webp', 'cornerstone_file': '_posts/burnout-e-lavoro/autenticita-in-ufficio/2024-11-8-autenticita-e-lavoro.md', 'cornerstone_title': "Lavoro e Autenticità: Come Sopravvivere all'Ufficio Senza Perdere l'Anima (e la Sanità Mentale)", 'full_content': '---\nlayout: category\ntitle: "Burnout e lavoro"\ncategory: burnout-e-lavoro\npermalink: /categorie/burnout-e-lavoro/\nredirect_from:\n  - /burnout-lavoro/\n  - /burnout/\nseo_title: "Burnout e lavoro — segnali, prevenzione e strategie pratiche"\nseo_description: "Guida pratica al burnout lavorativo: segnali precoci, strategie quotidiane per prevenire e strumenti concreti per recuperare energia senza rituali inutili."\ndescription: "Strategie pratiche, micro-abitudini e confini concreti per prevenire e uscire dal burnout sul lavoro. Testate in contesti reali, senza fuffa."\npromise: "Azioni reali da provare questa settimana per ridurre stress, recuperare tempo e riappropriarsi di energie mentali e fisiche."\ntopics:\n  - title: "Segnali e prevenzione"\n    description: "Sei stanco di sentirti in loop: sveglia, caffè, lavoro, scroll, crollo, repeat? Benvenuto nel club — qui non vendiamo soluzioni spirituali a prezzo pieno, vendiamo cose che funzionano nel caos."\n  - title: "Confini e comunicazione"\n    description: "Questa è la bacheca pratica per chi lavora troppo e si sente sfracellato: guide terse, micro-abitudini da provare subito e frasi pronte per dire al capo quel che serve (senza sembrare un meme). Il mantra è semplice: meno sceneggiata, più tattica."\n  - title: "Micro-abitudini quotidiane"\n    description: "Prova una cosa questa settimana: programma due pause da 10 minuti. Spegni le notifiche, cammina, respira, mangia una cosa che non è schiacciata in auto. Se dopo una settimana non senti nulla, ne proviamo un\'altra. Dosi piccole, effetti cumulativi."\n  - title: "Recupero e resilienza"\n    description: "Vuoi materiali pratici (checklist 7 giorni, template per parlare con il manager, mini-plan per recuperare il sonno)? Li metto in fondo come download—pratici, zero fuffa."\nog_image: /img/categories/burnout-cover.webp\ntwitter_card: summary_large_image\nfeatured_slugs:\n  - autenticita-e-lavoro\n  - come-ho-smesso-di-inseguire-il-tempo\n  - ritmi-gentili\nfaq:\n  - question: "Come capisco se sto andando verso il burnout?"\n    answer: "Segnali comuni: distacco emotivo dal lavoro, esaurimento persistente, ridotta efficacia. Se queste cose durano settimane e non migliorano con il riposo, è un campanello d\'allarme." \n  - question: "Posso recuperare senza cambiare lavoro?"\n    answer: "Sì: spesso serve combinare confini chiari, micro-abitudini (sonno, pause programmate) e supporto (colloqui con manager o terapia). Il cambiamento graduale spesso funziona meglio del gesto epico."\n  - question: "Qual è la prima cosa concreta da fare domani mattina?"\n    answer: "Prendi due pause programmate di 10 minuti: una a metà mattina e una a metà pomeriggio. Spegni notifiche non urgenti in quei 20 minuti e fai un micro-esercizio di respirazione o camminata." \n---\n', 'absolute_path': '/home/teo/Project/messymind.it/pages/categories/burnout-e-lavoro.md'}]

def apply_changes():
    """Applica modifiche ai file cluster"""
    
    # Crea backup
    backup_dir = Path("/home/teo/Project/messymind.it") / f".backup_cluster_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
    backup_dir.mkdir(exist_ok=True)
    print(f"✓ Backup creato: {backup_dir}")
    
    for i, change in enumerate(CHANGES, 1):
        file_path = Path(change['absolute_path'])
        
        # Backup file originale
        backup_file = backup_dir / file_path.name
        shutil.copy2(file_path, backup_file)
        
        # Leggi contenuto
        content = change['full_content']
        
        # Sostituisci image (se presente)
        if change['current_image'] != '(vuoto)':
            old_pattern = re.escape(f'image: {change["current_image"]}')
            new_line = f'image: {change["new_image"]}'
            content = re.sub(old_pattern, new_line, content)
        
        # Sostituisci hero_image (se presente)
        if change['current_hero'] != '(vuoto)':
            old_pattern = re.escape(f'hero_image: {change["current_hero"]}')
            new_line = f'hero_image: {change["new_image"]}'
            content = re.sub(old_pattern, new_line, content)
        
        # Sostituisci lcp_image (se presente)
        if change['current_lcp'] != '(vuoto)':
            old_pattern = re.escape(f'lcp_image: {change["current_lcp"]}')
            new_line = f'lcp_image: {change["new_image"]}'
            content = re.sub(old_pattern, new_line, content)
        
        # Scrivi file
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(content)
        
        print(f"[{i}/{len(CHANGES)}] ✓ {change['cluster_title']}")
    
    print(f"\n✓ {len(CHANGES)} file aggiornati con successo!")
    print(f"✓ Backup salvato in: {backup_dir}")
    print(f"\nEsegui build Jekyll: bundle exec jekyll build --config _config.dev.yml")

if __name__ == '__main__':
    print("\n⚠ ATTENZIONE: Stai per modificare {len(CHANGES)} file cluster.")
    confirm = input("Confermi applicazione modifiche? [s/N]: ")
    if confirm.lower() == 's':
        apply_changes()
    else:
        print("✗ Operazione annullata.")
